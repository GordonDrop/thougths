#сети

# Протоколы верхнего уровня. Другое.

## DNS

**DNS** (Domain Name System) - с-ма доменных имен. Хранится инф-цию о доменах, напр, соотв-е имя домена - IP-адрес.

В поля Source Address и Destination Address, которые работают на сетевом уровне, нельзя вставить имя, только IP адрес. DNS сообщает, какой IP адрес у запрошенного имени.

Служба эта иерархичная. И часто DNS-сервер (на котором запущена эта служба) работает в связке с другими DNS-серверами. Иерархичность его заключается в том, что он работает с доменами уровня. Работает он от младшего уровня к старшему, слева направо.

Например имя: ru.wikipedia.org. Cамым старшим будет доменное имя «org», а младшим — «ru». Когда DNS-сервер не может нам рассказать о каком-то доменном имени, и тогда он обращается к старшему DNS-серверу, который отвечает за доменные имена более высокого уровня.

![dns-resolve](../media/dns-resovje.jpg)

Для объяснения схемы запроса нужно понимать как работает ARP.

#arp
**ARP** (Address Resolution Protocol) — протокол определения MAC-адреса компьюетра по его IP адресу.

ARP сообщение - широкполоасное, его получают все участники сети, а отвечает только тот, у кого искомый IP адрес.

ARP-ответ:
1) MAC-адреса. Source MAC: MAC-адрес и Destination MAC  - Target MAC
2) Source IP, Target IP

Схема запроса по шагам
- Запрос по example.com
- ARP сообщение для поиска DNS сервера
- ARP-ответ от DNS сервера с IP адресом example.com
- ARP сообщение для запроса MAC адреса example.com
- ARP-ответ от сервера с IP адресом example.com
- установление TCP сесии
- компьютер формирует HTTP и отсылает его веб-серверу

Заголовок host будет указывать на exmaple.com, но  ip адрес будет располагатья на сетевом уровне.

**hosts файл**
Файл есть в каждой ОС, он тесно связан с DNS. В Windows - «windows\system32\drivers\etc\hosts». А в *nix подобных системах: "/etc/hosts". Делает он то же самое, что и DNS-сервера. И контролируется этот файл администратором компьютера. И самое важное: он имеет приоритет перед DNS-сервером.

## DHCP

**DHCP (Dynamic Host Configuration Protocol)** - протокол динамической настройки узла. Он позволяет узлам динамически получать IP адреса и другие параметры для корректной работы в сети (основной шлюз, маску подсети, адреса DNS-серверов).

При помощи DHCP можно обеспечить полный контроль над IP адресами: создавать отдельные пулы для каждой подсети, выдавать адреса в аренду, резервировать адреса и многое другое.

Сложная штука, не будем вдаваться в детали.

## POP3

**POP3 (Post Office Protocol Version 3)**

Работает он по принципу «загрузи и удали». Клиент заходит на сервер и смотрит, есть ли для него письмо. И если оно присутствует, он загружает его к себе и ставит отметку об удалении на сервере.

Порт, который он прослушивает — 110. Есть расширенная версия — POP3S. При помощи дополнительного криптографического протокола, как SSL, шифруется содержимое, и письма передаются в защищенном виде. POP3S использует 995 порт.

## IMAP и SMTP

**IMAP (англ. Internet Message Access Protocol)** - аналог протокла POP3. Более сложен, но главное отличие, он только копирует почту. Слушает 143 порт.

**SMTP (англ. Simple Mail Transfer Protocol)** - протокол предачи почты на сервер. Порт - 25.

Каждый почтовый протокол требует надежности, поэтому каждый прокотол использует TCP/IP.

## Telnet и SSH

**Telnet (Cетевой терминал)** - применяется он для отображения текстового интерфейса, а также для управления ОС. Незащещенный.

**SSH (secure shell)** - как и Telnet позволяет управлять ОС. Отличие его в том, что он шифрует весь трафик и передаваемые пароли. Шифруется при помощи алгоритма Диффи-Хеллмана. 

## FTP и SFTP

**FTP (англ. File Transfer Protocol)** - протокол передачи файлов. Думаю из названия протокола ясно, что он передает файлы. Очень древний протокол, вышедший в начале 70-х годов. Появился он еще до HTTP и стека TCP/IP. Как работал раньше, так и сейчас работает по «клиент-сервер» модели. То есть, присутствует инициатор соединения и тот, кто его слушает. Есть несколько модификаций, которые поддерживают шифрование, туннелирование и так далее. 

## TFTP

**TFTP (англ. Trivial File Transfer Protocol).** - простой протокол передачи файлов. Придумали его в 80-х годах. Хоть FTP был достаточно популярным, не все его функции были нужны для решения простых задач. И был придуман его простой аналог. Он работает по UDP, то есть не требует установления соединения. Также он не требует аутентификации и авторизации. Достаточно знать его IP-адрес и самому его иметь. Это конечно не безопасно, так как адрес можно подделать. Но когда нужен простой протокол и не требуется авторизация, выбор падает на него.
